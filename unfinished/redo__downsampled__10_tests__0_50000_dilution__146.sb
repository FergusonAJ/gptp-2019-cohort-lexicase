#!/bin/bash
########## Define Resources Needed with SBATCH Lines ##########

#SBATCH --time=72:00:00         # limit of wall clock time - how long the job will run (same as -t)
#SBATCH --array=1-1
#SBATCH --mem=4G                # memory required per node - amount of memory (in bytes)
#SBATCH --job-name lsd10_0_50000     # you can give your job a name for easier identification (same as -J)
#SBATCH --account=devolab

########## Command Lines to Run ##########


##################################
# Setup random seed info
PROBLEM_SEED_OFFSET=17000

TREATMENT=2
TREATMENT_NAME="downsampled"

PROG_COHORT_SIZE=100
NUM_TESTS=10 #Used for TEST_COHORT_SIZE, NUM_TESTS, and DOWNSAMPLED_NUM_TESTS

DILUTION_PCT="0.50000"
DILUTION_NAME="0_50000"
GENERATIONS=3000
REDO_SEED_OFFSET=35

SEED=$((REDO_SEED_OFFSET + PROBLEM_SEED_OFFSET))


##################################
# Setup relevant directories
OUTPUT_DIR=/mnt/gs18/scratch/users/fergu358/lexicase/${TREATMENT_NAME}/${NUM_TESTS}/${DILUTION_NAME}/${SEED}

echo "./gptp2019 -SEED ${SEED} -TREATMENT ${TREATMENT} -OUTPUT_DIR ${OUTPUT_DIR} -PROG_COHORT_SIZE ${PROG_COHORT_SIZE} -TEST_COHORT_SIZE ${NUM_TESTS} -NUM_TESTS ${NUM_TESTS} -DOWNSAMPLED_NUM_TESTS ${NUM_TESTS} -DILUTION_PCT ${DILUTION_PCT} -GENERATIONS ${GENERATIONS}"

./gptp2019 -SEED ${SEED} -TREATMENT ${TREATMENT} -OUTPUT_DIR ${OUTPUT_DIR} -PROG_COHORT_SIZE ${PROG_COHORT_SIZE} -TEST_COHORT_SIZE ${NUM_TESTS} -NUM_TESTS ${NUM_TESTS} -DOWNSAMPLED_NUM_TESTS ${NUM_TESTS} -DILUTION_PCT ${DILUTION_PCT} -GENERATIONS ${GENERATIONS}
